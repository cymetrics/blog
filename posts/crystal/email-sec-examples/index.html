<!DOCTYPE html><html domain="tech-blog.cymetrics.io" ga-id="G-3VBVCXV9Z0" lang="zh-TW"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1" name="viewport"><meta content="CYBER,Cymetrics,Security" name="keywords"><link href="/img/favicon/favicon-192x192.png?hash=42b087227d" rel="icon" type="image/png"><meta content="#5789d3" name="theme-color"><title>é—œæ–¼ email security çš„å¤§å°äº‹â€Šâ€”â€Šç¯„ä¾‹ç¯‡</title><meta content="é—œæ–¼ email security çš„å¤§å°äº‹â€Šâ€”â€Šç¯„ä¾‹ç¯‡" property="og:title"><meta content="é—œæ–¼ email security çš„å¤§å°äº‹â€Šâ€”â€Šç¯„ä¾‹ç¯‡" name="twitter:title"><meta content="summary_large_image" name="twitter:card"><meta content="æœ‰é‘’æ–¼å¤§å®¶äº†è§£äº† SPFã€DKIMã€DMARC è¨­ç½®ä¸Šçš„åŸç†èˆ‡åœ°é›·å¾Œï¼Œå°æ–¼å¦‚ä½•è¨­ç½®å¯èƒ½é‚„æ˜¯éœ§é¢¯é¢¯ï¼Œå› æ­¤æ±ºå®šå†æ¨å‡ºç¯„ä¾‹ç¯‡è®“å¤§å®¶çœ‹ä¸€äº›å¯¦éš›çš„ç´€éŒ„ä»¥åŠè¨­ç½®æ–¹å¼ã€‚å¸Œæœ›å¯ä»¥è®“å¤§å®¶è¼•é¬†åšå¥½ email securityï¼" name="description"><meta content="æœ‰é‘’æ–¼å¤§å®¶äº†è§£äº† SPFã€DKIMã€DMARC è¨­ç½®ä¸Šçš„åŸç†èˆ‡åœ°é›·å¾Œï¼Œå°æ–¼å¦‚ä½•è¨­ç½®å¯èƒ½é‚„æ˜¯éœ§é¢¯é¢¯ï¼Œå› æ­¤æ±ºå®šå†æ¨å‡ºç¯„ä¾‹ç¯‡è®“å¤§å®¶çœ‹ä¸€äº›å¯¦éš›çš„ç´€éŒ„ä»¥åŠè¨­ç½®æ–¹å¼ã€‚å¸Œæœ›å¯ä»¥è®“å¤§å®¶è¼•é¬†åšå¥½ email securityï¼" name="twitter:description"><meta content="æœ‰é‘’æ–¼å¤§å®¶äº†è§£äº† SPFã€DKIMã€DMARC è¨­ç½®ä¸Šçš„åŸç†èˆ‡åœ°é›·å¾Œï¼Œå°æ–¼å¦‚ä½•è¨­ç½®å¯èƒ½é‚„æ˜¯éœ§é¢¯é¢¯ï¼Œå› æ­¤æ±ºå®šå†æ¨å‡ºç¯„ä¾‹ç¯‡è®“å¤§å®¶çœ‹ä¸€äº›å¯¦éš›çš„ç´€éŒ„ä»¥åŠè¨­ç½®æ–¹å¼ã€‚å¸Œæœ›å¯ä»¥è®“å¤§å®¶è¼•é¬†åšå¥½ email securityï¼" property="og:description"><meta content="article" property="og:type"><meta content="https://tech-blog.cymetrics.io/posts/crystal/email-sec-examples/" property="og:url"><link href="https://tech-blog.cymetrics.io/posts/crystal/email-sec-examples/" rel="canonical"><meta content="Cymetrics Tech Blog" property="og:site_name"><meta content="https://tech-blog.cymetrics.io/img/posts/crystal/email-sec-examples/cover.jpg" property="og:image"><meta content="https://tech-blog.cymetrics.io/img/posts/crystal/email-sec-examples/cover.jpg" name="twitter:image"><meta content="hsZQwAip9iIbys-i4PJp_MfpNiA6w6RB0hYdWLiLUuk" name="google-site-verification"><meta content="always" name="referrer"><link href="/feed/feed.xml" rel="alternate" type="application/atom+xml" title="Cymetrics Tech Blog"><link href="/" rel="preconnect" crossorigin=""><script async="" src="/js/min.js?hash=7f26b2ece8" defer=""></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-3VBVCXV9Z0"></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-3VBVCXV9Z0');</script><script csp-hash="">if (/Mac OS X/.test(navigator.userAgent))document.documentElement.classList.add('apple')</script><style>:root{--primary-color: #5789d3;--primary-dark-color: #ffd349;--fgColor: #2f2f2f;--bgColor: linear-gradient(to top, #efefef, #ffffff);--primary: var(--primary-color);--primary-dark: var(--primary-dark-color);--fg: var(--fgColor);--bg: var(--bgColor);--progressColor: #ffd349;--main-width: calc(100vw - 3em)}main img{content-visibility:auto}article *{scroll-margin-top:50px}header nav{z-index:1;position:fixed;top:0;left:0;width:100vw;background:#fff;font-weight:200;text-align:right;padding:0}@media (min-width:37.5em){:root{--main-width: calc(37.5em - 3em)}}dialog,share-widget{position:fixed;opacity:.9}share-widget{right:20px;bottom:20px;width:50px;height:50px;border-radius:50%;overflow:hidden;box-shadow:2px 3px 5px 2px rgba(0,0,0,.2)}@media screen and (max-width:376px){share-widget{display:none}}share-widget div{margin-left:50%;transform:translateX(-50%);width:20px;height:20px;background-image:url(/img/share.svg);background-repeat:no-repeat;background-position:center;background-size:contain}.apple share-widget div{background-image:url(/img/share-apple.svg)}share-widget button{margin:0;padding:0;width:100%;height:100%;transition:.3s}share-widget button:active{transform:scale(1.2)}dialog{background-color:var(--primary-dark);z-index:1000;font-size:14px}#reading-progress{z-index:1;background-color:var(--progressColor);width:100vw;position:absolute;left:0;bottom:0;height:2px;transform:translate(-100vw,0);will-change:transform;pointer-events:none}#posts li{margin-bottom:.5em}html{line-height:1.15;-webkit-text-size-adjust:100%;font-family:"Open Sans",-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans","Helvetica Neue",Helvetica,Arial,"Noto Sans TC","PingFang TC","Hiragino Sans GB","Heiti TC","Microsoft YaHei","Microsoft Jhenghei",sans-serif;--font-family: "Open Sans", -apple-system, system-ui, BlinkMacSystemFont,
    "Segoe UI", Roboto, "Noto Sans", "Helvetica Neue", Helvetica, Arial,
    "Noto Sans TC", "PingFang TC", "Hiragino Sans GB", "Heiti TC",
    "Microsoft YaHei", "Microsoft Jhenghei", sans-serif}body,figure{margin:0}body.lock{overflow:hidden}button,hr{overflow:visible}hr{box-sizing:content-box;height:0;border-bottom:1px solid var(--fg)}a{background-color:transparent;text-underline-offset:2px;text-decoration:none;color:var(--primary)}b,strong{font-weight:700}img{border-style:none;max-width:100%;height:auto;margin:0 auto}button{font-family:inherit;font-size:100%;line-height:1.15;text-transform:none}[type=button],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}h2{font-size:2.5em;line-height:1.2;margin-bottom:.6em;line-height:2.4rem;margin-bottom:1.36rem;font-size:1.728rem}h3{font-size:2em;line-height:1.125;margin-bottom:.75em;font-size:1.4rem;line-height:1.5rem;margin-bottom:1rem}body,ol,p,pre,ul{font-size:1em}ol,p,pre,ul{margin-bottom:1.5em}body,ol,p,pre,ul{font-size:1rem;line-height:1.6}ol,p,pre,ul{margin-bottom:1.36rem}@media (min-width:600px){h2{font-size:2.0097rem;line-height:2.52rem}h3{font-size:1.7989rem;line-height:2rem}body,ol,p,pre,ul{font-size:1.1rem;line-height:1.6}h2,h3,ol,p,pre,ul{margin-bottom:1.496rem}}@media (min-width:1200px){h2{font-size:2.05rem}h3{font-size:1.5rem}body,ol,p,pre,ul{font-size:1.2rem;line-height:1.6}h2,h3,ol,p,pre,ul{margin-bottom:1.632rem}}th{font-weight:600}td,th{border-bottom:1px solid #595959;overflow:auto;padding:.75em;text-align:left;vertical-align:top}thead th{border-bottom:1px solid #f9c412}table{display:table}code,pre,table{overflow-x:auto}pre{font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace}pre code:not([class]){overflow-x:scroll}button,code{border-radius:.3em}code{color:#e33671;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:90%}h1,h2,h3{font-family:var(--font-family)}a:hover{text-decoration:underline}figcaption{color:#757575;margin-top:.75em;text-align:center}figcaption>p{margin:0;font-size:90%}button{max-width:100%;background:#f2f2f2;color:#191919;cursor:pointer;padding:.75em 1.5em;text-align:center;margin:0 .75em 1.5em 0}button+label,label+*{page-break-before:always}button,label{display:inline-block}button:hover{background:#d9d9d9;color:#000}button:not([disabled]){background:#f9c412;color:#181818;background:var(--primary)}button:not([disabled]):hover{background:#ba9005;color:#000;background:var(--primary-dark)}*{border:0;box-sizing:border-box}body{font-family:var(--font-family);background:var(--bg);color:var(--fg)}figure img,header label{display:block}article,header{max-width:100%;width:42.5em;margin:0 auto}header{padding:4.5em 24px 0;text-align:center;display:flex;align-items:center;flex-direction:column}header p,ol,ul{margin-top:0}header nav .nav-title{float:left;font-size:inherit;line-height:inherit;margin:0;text-align:left}header nav label{color:#000;cursor:pointer;margin:0;font-style:normal;text-align:right}main{max-width:70rem;margin:0 auto;min-height:60vh}article{padding:1.5em;word-break:break-word}li ol,li ul{margin-bottom:0}code[class*=language-],pre[class*=language-]{color:#ccc;background:0 0;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}::-webkit-scrollbar-thumb:hover{background:var(--primary)}.w-full{width:100%}body.dark{--fg: var(--bgColor);--bg: var(--fgColor);--primary: var(--primary-dark-color)}@media (prefers-color-scheme:dark){body.dark{--fg: var(--bgColor);--bg: var(--fgColor);--primary: var(--primary-dark-color)}}h1{font-size:32px;line-height:1.25;margin:.67em 0;text-align:left}header aside{font-size:16px;color:#4b4b4b}.post,footer{border-top:1px solid #ccc}.post{padding-top:35px;margin-top:35px}.menu__btn{display:inline-block;width:24px;height:24px;position:relative}.menu__btn span{opacity:0;width:1px;height:1px;overflow:hidden;display:block}.menu__btn::after,.menu__btn::before{content:"";position:absolute;top:51%;left:50%;height:2px;width:17px;background-color:#2d2d2d;border-radius:.1rem}.menu__btn::before{transform:translate(-50%,-50%);box-shadow:0 .3rem 0 #2d2d2d,0 -.3rem 0 #2d2d2d}.menu__btn::after{display:none;transform:translate(-50%,-50%) rotate(90deg)}.menu__btn.menu__btn--close{z-index:9;transform:rotate(45deg)}.menu__btn.menu__btn--close::before{box-shadow:none}.menu__btn.menu__btn--close::after{display:block}#nav,#nav .nav-title{display:flex;align-items:center}#nav{position:relative;height:68px;z-index:2}#nav .nav-title{padding:.375rem 1.5rem;width:100%;justify-content:space-between}#nav .nav-title *,.article-footer img{margin:0}.nav__links{display:none;flex-direction:column;position:fixed;z-index:3;top:0;left:0;right:0;bottom:0;padding:86px 48px 0;background-image:linear-gradient(to top,#efefef,#fff),linear-gradient(to bottom,#f9f9f9,#f9f9f9)}.nav__links--open{display:flex}.nav__links a{text-align:left;width:100%;padding:.5rem 0;transition:all .3s ease-out;font-weight:700;text-decoration:none;color:var(--fg)}.nav__links a:hover{color:var(--primary-color)}.nav-logo{width:260px;height:40px;background:url(/img/logo1.png) no-repeat center center;background-size:contain}footer{margin-top:48px;font-size:14px;padding:24px;text-align:center}.copyright{display:inline-block}footer>*{margin:.5em}.footer-logos{display:flex;align-items:center;justify-content:center}.footer-logos a:not(:first-child){margin-left:32px}.post-tags{display:flex;gap:0 16px;flex-wrap:wrap}.direct-link{display:none}.post-avatar{margin-top:27px;display:flex;align-items:center;height:36px}.post-avatar__img{width:36px;height:36px;overflow:hidden;margin:0;border-radius:50%}.post-avatar__time{font-size:13px}.post-avatar__info{margin-left:8px;color:#747474;text-align:left}.post-avatar__author{font-size:14px;font-weight:700}.article-footer{margin-top:40px;border-bottom:1px solid #ccc;padding-bottom:52px}.article-footer a{float:right;display:flex;align-items:center;color:var(--fg);font-weight:700;margin-left:4px}.article-author{margin-top:34px;display:flex;align-items:flex-start;margin-bottom:48px}.article-author__img{width:80px;height:80px;overflow:hidden;margin:0;border-radius:50%;flex-shrink:0}.article-author__info{margin-left:16px;text-align:left}.article-author__title{color:#747474;font-size:16px}.article-author__author{font-size:22px;font-weight:700;line-height:1em}.article-author__intro{color:#2f2f2f;margin-top:8px}@media (min-width:768px){h1{font-size:48px}header aside{font-size:20px}header nav a:first-of-type{margin-left:auto}header nav a:last-of-type{margin-right:1.5em}.menu__btn{display:none}#nav,footer{max-width:1168px}#nav{height:80px;margin:0 auto}.nav-logo{width:313px}.nav__links{display:flex;flex-direction:row;position:static;padding:0;background-image:none}.nav__links a{text-align:center;margin-left:56px}footer{display:flex;flex-direction:row-reverse;justify-content:space-between;align-items:center;margin-left:auto;margin-right:auto}}.notice-block{text-align:left;background:rgba(87,137,211,.2);padding:16px;margin-top:24px;border-radius:8px}</style></head><body><header><nav><div id="nav"><div class="nav-title"><a href="/" class="nav-logo" title="Homepage"></a> <label class="menu__btn" for="menu__control"><span>Menu</span></label></div><div class="nav__links"><a href="/archive/">Archive</a> <a href="/tags/">Tags</a> <a href="/about/">About</a> <a href="/en">English</a></div></div><div id="reading-progress" aria-hidden="true"></div></nav><h1 class="w-full">é—œæ–¼ email security çš„å¤§å°äº‹â€Šâ€”â€Šç¯„ä¾‹ç¯‡</h1><aside class="w-full"><div class="post-tags"><a href="/tags/security/" class="post-tag">#Security</a> <a href="/tags/email-security/" class="post-tag">#Email Security</a></div><div class="post-avatar"><img src="/img/authors/crystal_logo.png" alt="crystal" class="post-avatar__img" data-deopt="true"><div class="post-avatar__info"><div class="post-avatar__author"><a href="/posts/crystal">crystal</a></div><div class="post-avatar__time">16 Jul 2021</div></div></div><div class="notice-block" data-nosnippet="" style="display:none;">æˆ‘å€‘æ­£åœ¨å°‹æ‰¾ä¸€ä½ Security Engineer åŠ å…¥æˆ‘å€‘çš„åœ˜éšŠï¼Œè©³æƒ…è«‹åƒè€ƒ<a href="https://github.com/cymetrics/blog/issues/13" rel="noopener noreferrer" target="_blank">è·ç¼ºè³‡è¨Š</a></div></aside><dialog id="message"></dialog></header><main><article><div id="post-page"></div><p>æœ‰é‘’æ–¼å¤§å®¶äº†è§£äº† SPFã€DKIMã€DMARC è¨­ç½®ä¸Šçš„åŸç†èˆ‡åœ°é›·å¾Œï¼Œå°æ–¼å¦‚ä½•è¨­ç½®å¯èƒ½é‚„æ˜¯éœ§é¢¯é¢¯ï¼Œå› æ­¤æ±ºå®šå†æ¨å‡ºç¯„ä¾‹ç¯‡è®“å¤§å®¶çœ‹ä¸€äº›å¯¦éš›çš„ç´€éŒ„ä»¥åŠè¨­ç½®æ–¹å¼ã€‚å¸Œæœ›å¯ä»¥è®“å¤§å®¶è¼•é¬†åšå¥½ email securityï¼</p><p>ä»¥ä¸‹æœ‰ä¸æ‡‚çš„æ¨™ç±¤å¯ä»¥åƒç…§è¨­å®šç¯‡ï¼š<br>SPF çš„è¨­å®š ğŸ‘‰ <a href="https://tech-blog.cymetrics.io/posts/crystal/email-sec-settings-spf">é—œæ–¼ email security çš„å¤§å°äº‹â€Šâ€”â€Šè¨­å®šç¯‡ SPF</a><br>DKIMã€DMARC çš„è¨­å®š ğŸ‘‰ <a href="https://tech-blog.cymetrics.io/posts/crystal/email-sec-settings-dkimdmarc">é—œæ–¼ email security çš„å¤§å°äº‹â€Šâ€”â€Šè¨­å®šç¯‡ DKIMã€DMARC</a></p><p>ä»¥ä¸‹ä¸»è¦ä»¥ <a href="https://mxtoolbox.com/SuperTool.aspx?run=toolpage" rel="noopener noreferrer" target="_blank">mxtoolbox</a> ä½œç‚ºç´€éŒ„æŸ¥è©¢å·¥å…·ã€‚</p><hr><h2 id="spf"><a href="#spf" class="direct-link">#</a> SPF</h2><p>åœ¨è¨­å®š SPF æ™‚æœ€é‡è¦çš„å°±æ˜¯çŸ¥é“ã€æœ‰å“ªäº›å¯„ä¿¡çš„ç¶²åŸŸã€ã€‚æˆ‘å€‘ç”¨å¹¾ç¨®æƒ…å¢ƒèˆ‰ä¾‹ï¼š</p><h3 id="%E6%83%85%E5%A2%83%E4%B8%80%EF%BC%9A%E5%8F%AA%E6%9C%89%E8%87%AA%E5%AE%B6%E7%B6%B2%E5%9F%9F"><a href="#%E6%83%85%E5%A2%83%E4%B8%80%EF%BC%9A%E5%8F%AA%E6%9C%89%E8%87%AA%E5%AE%B6%E7%B6%B2%E5%9F%9F" class="direct-link">#</a> æƒ…å¢ƒä¸€ï¼šåªæœ‰è‡ªå®¶ç¶²åŸŸ</h3><p>é¦–å…ˆï¼Œä½ éœ€è¦çŸ¥é“è‡ªå·±æœ‰å“ªäº› mail server ã€‚</p><p>é€™æ™‚ä½ æœ‰ä¸‹é¢å¹¾ç¨®é¸é …ï¼š</p><p><strong>mail server èˆ‡å¯„ä¿¡ domain ç›¸åŒ(IP åŒ)</strong>ï¼Œå…è¨± IP å°±æ˜¯æ­¤ domain çš„ IPï¼š</p><pre class="language-txt"><code class="language-txt">v=spf1 a -all</code></pre><p><strong>mail server èˆ‡å¯„ä¿¡ domain ç›¸åŒ(IP ä¸åŒ)</strong>ï¼Œå…è¨± IP å°±æ˜¯ mail server çš„ IPï¼š</p><pre class="language-txt"><code class="language-txt">v=spf1 mx -all</code></pre><p><strong>mail server èˆ‡å¯„ä¿¡ domain ä¸åŒï¼Œæˆ–æ˜¯æœ‰å¤šå° mail server</strong>ï¼Œéœ€ä¸€ä¸€åˆ—å‡ºï¼š</p><pre class="language-txt"><code class="language-txt">v=spf1 mx:mail-server-1 mx:mail-server-2 mx:mail-server-3 -all</code></pre><p><strong>å·²ç¶“æœ‰åˆ¥çš„å¯„ä¿¡ domain è¨­ç½®å¥½ SPF</strong> ï¼Œä¾‹å¦‚ google è‡ªå·±æ˜¯ email provider åˆåŒæ™‚æä¾› email hostingï¼Œä»¥ä¸‹ç‚º <a href="http://gmail.com" rel="noopener noreferrer" target="_blank">gmail.com</a> çš„ SPF ç´€éŒ„ï¼š</p><pre class="language-txt"><code class="language-txt">v=spf1 redirect=_spf.google.com</code></pre><p>å»ºè­°å¦‚æœæƒ³çœä¸‹ DNS query çš„æ‰£æ‰“ï¼Œå¯ä»¥è€ƒæ…® <strong>å±•é–‹æˆ <code>ip4</code> <code>ip6</code> æ©Ÿåˆ¶</strong>ï¼Œä¾‹å¦‚ä»¥ä¸‹ç‚º MailChimpï¼ˆ<a href="http://servers.mcsv.net" rel="noopener noreferrer" target="_blank">servers.mcsv.net</a>ï¼‰çš„ SPF ç´€éŒ„ï¼š</p><pre class="language-txt"><code class="language-txt">v=spf1 ip4:205.201.128.0/20 ip4:198.2.128.0/18 ip4:148.105.8.0/21 -all</code></pre><h3 id="%E6%83%85%E5%A2%83%E4%BA%8C%EF%BC%9A%E4%BD%BF%E7%94%A8%E9%9B%B2%E7%AB%AF%E6%88%96%E6%98%AF%E7%AC%AC%E4%B8%89%E6%96%B9%E7%B6%B2%E5%9F%9F"><a href="#%E6%83%85%E5%A2%83%E4%BA%8C%EF%BC%9A%E4%BD%BF%E7%94%A8%E9%9B%B2%E7%AB%AF%E6%88%96%E6%98%AF%E7%AC%AC%E4%B8%89%E6%96%B9%E7%B6%B2%E5%9F%9F" class="direct-link">#</a> æƒ…å¢ƒäºŒï¼šä½¿ç”¨é›²ç«¯æˆ–æ˜¯ç¬¬ä¸‰æ–¹ç¶²åŸŸ</h3><p>ç•¶ä½ ä½¿ç”¨ç¬¬ä¸‰æ–¹ç¶²åŸŸå¯„ä¿¡ï¼Œå°±å¿…é ˆæŠŠä»–å€‘çš„ mail server ä¹Ÿæ”¾åˆ°è‡ªå·±çš„ SPF ç´€éŒ„ä¸­ï¼Œä¸€èˆ¬è€Œè¨€ä»–å€‘éƒ½å·²ç¶“æœ‰è¨­å¥½ SPF ç´€éŒ„äº†ï¼Œæ‰€ä»¥ä½ åªè¦ç”¨ <code>include</code> æ©Ÿåˆ¶å°±å¯ä»¥æ¶µè“‹ã€‚è«‹å»æŸ¥è©¢ä»–å€‘è¨­ç½® SPF çš„ domain ç„¶å¾ŒåŠ åˆ°ç´€éŒ„ä¸­ï¼š</p><pre class="language-txt"><code class="language-txt">v=spf1 include:third-1 include:third-2 include:third-3 -all</code></pre><p><em>***æ–‡æœ«é™„ä¸Šæœ€è¿‘æ•´ç†çš„å¸¸è¦‹ç¬¬ä¸‰æ–¹ SPF domain***</em></p><p>ä»¥ OneDegree ç‚ºä¾‹ï¼Œæˆ‘å€‘ä½¿ç”¨çš„ hosting provider ç‚º Microsoft Office365ï¼Œç¬¬ä¸‰æ–¹æœå‹™ç‚ºï¼š SendGridã€MailChimpã€FreshDeskã€‚å»ç¶²ç«™ä¸ŠæŸ¥ä¸€ä¸‹æˆ–æ˜¯åœ¨æœå‹™çš„ portal è£¡æ‡‰è©²å°±èƒ½è¼•é¬†æ‰¾åˆ°è¨­ç½® SPF çš„ domainï¼Œä¾‹å¦‚ä¸‹åœ–æ˜¯ MailChimp çš„æ–‡ä»¶ï¼š</p><p><picture><source sizes="(max-width: 758px) 100vw, 758px" srcset="/img/posts/crystal/email-sec-examples/mailchimp-1920w.webp 1920w, /img/posts/crystal/email-sec-examples/mailchimp-1280w.webp 1280w, /img/posts/crystal/email-sec-examples/mailchimp-840w.webp 840w, /img/posts/crystal/email-sec-examples/mailchimp-320w.webp 320w" type="image/webp"><source sizes="(max-width: 758px) 100vw, 758px" srcset="/img/posts/crystal/email-sec-examples/mailchimp-1920w.png 1920w, /img/posts/crystal/email-sec-examples/mailchimp-1280w.png 1280w, /img/posts/crystal/email-sec-examples/mailchimp-840w.png 840w, /img/posts/crystal/email-sec-examples/mailchimp-320w.png 320w" type="image/png"><img src="/img/posts/crystal/email-sec-examples/mailchimp-1920w.png" alt="" height="488" width="800" decoding="async" loading="lazy" style="background-size:cover;background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 800 488'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAIAAAB1kpiRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAfklEQVQImSXNQRLDMAgDQP//m5mAE8CAcd3SXFonOzpodFEZYRH2Gq6NEDaEzZTH8Ah1b4XOE2EH2CviUWtFRAREIObMLAcR84oINxGmU4S5NTL7ZBZ3c1t67xHR3X11N9U5ZwlTFe597Y/M/N6u6yphZkxPlMnN5pzv2//7B8ghqHACJFTMAAAAAElFTkSuQmCC'%3E%3C/image%3E%3C/svg%3E&#34;)"></picture></p><p>è³‡æ–™æ”¶é›†å®Œæˆï¼Œå°±èƒ½åˆæ­¥å»ºæ§‹å‡ºæˆ‘å€‘çš„ SPF ç´€éŒ„ï¼š</p><pre class="language-txt"><code class="language-txt">v=spf1 include:spf.protection.outlook.com include:sendgrid.net include:servers.mcsv.net include:email.freshdesk.com -all</code></pre><p>å†ä¾†å°±æ˜¯å„ªåŒ–çš„éƒ¨åˆ†ï¼Œä½ å¯ä»¥å» <a href="https://mxtoolbox.com/SuperTool.aspx?run=toolpage" rel="noopener noreferrer" target="_blank">mxtoolbox</a> é€ä¸€æŸ¥è©¢ä»¥ä¸Š include çš„é€™äº›ç´€éŒ„ï¼Œæœƒç™¼ç¾ <a href="http://email.freshdesk.com" rel="noopener noreferrer" target="_blank">email.freshdesk.com</a> å·²ç¶“åŒ…å«äº† <a href="http://sendgrid.net" rel="noopener noreferrer" target="_blank">sendgrid.net</a> ï¼Œä¹Ÿå°±æ˜¯èªªå…¶å¯¦æˆ‘å€‘è‡ªå·±çš„ç´€éŒ„ä¸­å·²ç¶“é‡è¤‡ include äº†ï¼Œé€ æˆä¸€æ¬¡å¤šé¤˜çš„ DNS queryã€‚</p><p><picture><source sizes="(max-width: 758px) 100vw, 758px" srcset="/img/posts/crystal/email-sec-examples/mxtoolbox-1920w.webp 1920w, /img/posts/crystal/email-sec-examples/mxtoolbox-1280w.webp 1280w, /img/posts/crystal/email-sec-examples/mxtoolbox-840w.webp 840w, /img/posts/crystal/email-sec-examples/mxtoolbox-320w.webp 320w" type="image/webp"><source sizes="(max-width: 758px) 100vw, 758px" srcset="/img/posts/crystal/email-sec-examples/mxtoolbox-1920w.png 1920w, /img/posts/crystal/email-sec-examples/mxtoolbox-1280w.png 1280w, /img/posts/crystal/email-sec-examples/mxtoolbox-840w.png 840w, /img/posts/crystal/email-sec-examples/mxtoolbox-320w.png 320w" type="image/png"><img src="/img/posts/crystal/email-sec-examples/mxtoolbox-1920w.png" alt="" height="177" width="800" decoding="async" loading="lazy" style="background-size:cover;background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 800 177'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAECAIAAAAI1ii7AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAvklEQVQImU3GywqCQBSAYd83KoraRKsWvUepXQiiR8jURav0THMcKzWzy4gRaUFiJtEu+Pn4hX1wcvyjF5yiezLbRDK5jCgXyRmjZ1EUr/cn/ZWnWf6bLBe6k2V7anem2BqvS32jLJpV0Sj1jKpo1mWoSVCXzJoEzQE0hqQirwUNDR1BQ1OjMEeiWERlVGFU37AFQ8Wiqm0tbNS3TLWtOUPBC+HAwT2vfA77K/WvGNzYJd6FD5cnDk+c8E8e774F/ZwG4Sh6AAAAAABJRU5ErkJggg=='%3E%3C/image%3E%3C/svg%3E&#34;)"></picture></p><p>æ’é™¤é‡è¤‡çš„éƒ¨åˆ†ï¼Œæˆ‘å€‘å°±èƒ½å¾—åˆ°æœ€çµ‚çš„ SPF ç´€éŒ„ï¼š</p><pre class="language-txt"><code class="language-txt">v=spf1 include:spf.protection.outlook.com include:servers.mcsv.net include:email.freshdesk.com -all</code></pre><h3 id="%E6%83%85%E5%A2%83%E4%B8%89%EF%BC%9A%E5%90%8C%E6%99%82%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%B6%E7%B6%B2%E5%9F%9F%E8%B7%9F%E7%AC%AC%E4%B8%89%E6%96%B9%E7%B6%B2%E5%9F%9F"><a href="#%E6%83%85%E5%A2%83%E4%B8%89%EF%BC%9A%E5%90%8C%E6%99%82%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%B6%E7%B6%B2%E5%9F%9F%E8%B7%9F%E7%AC%AC%E4%B8%89%E6%96%B9%E7%B6%B2%E5%9F%9F" class="direct-link">#</a> æƒ…å¢ƒä¸‰ï¼šåŒæ™‚ä½¿ç”¨è‡ªå®¶ç¶²åŸŸè·Ÿç¬¬ä¸‰æ–¹ç¶²åŸŸ</h3><p>é€™æ‡‰è©²æ˜¯æœ€å¸¸è¦‹çš„æƒ…æ³äº†ã€‚åªè¦çµåˆä¸Šé¢çš„å…©å€‹æƒ…å¢ƒå°±è¡Œï¼Œä¸€èˆ¬ä¾†èªªæœƒæŠŠè‡ªå®¶çš„ <code>a</code> <code>mx</code> æ”¾å‰é¢ï¼Œ<code>include</code> çš„æ”¾å¾Œé¢ï¼Œä¸éé€™ä¹Ÿæ²’æœ‰è¦å®šï¼Œç´”ç²¹é–±è®€æ–¹ä¾¿å°±æ˜¯äº†ã€‚</p><p>è¦ç‰¹åˆ¥æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ æœ‰ç”¨åˆ° <code>redirect</code> è¨˜å¾—è¦æ”¾æœ€å¾Œï¼Œå› ç‚º <code>redirect</code> æ˜¯ä¸€ç¨® modifierï¼Œä¹Ÿå°±æ˜¯å‰é¢çš„ mechanism éƒ½æ²’æœ‰ match æ‰æœƒåŸ·è¡Œï¼Œç›¸å°çš„ï¼Œè·³åˆ° <code>redirect</code> çš„ SPF ç´€éŒ„ä¹‹å¾Œï¼Œå°±æœƒä»¥é‚£ç­† SPF ç´€éŒ„ç‚ºä¸»ï¼Œæœ¬ä¾†åœ¨ <code>redirect</code> å¾Œé¢çš„æ±è¥¿éƒ½æœƒè¢«å¿½ç•¥ã€‚æ‰€ä»¥å¦‚æœè¦ç”¨å°±è¦é•·é€™æ¨£ï¼š</p><pre class="language-txt"><code class="language-txt">v=spf1 mx include:spf.protection.outlook.com include:sendgrid.net redirect:_spf.PROVIDERSERVER.COM</code></pre><h3 id="%E7%99%BC%E5%B8%83%E7%B4%80%E9%8C%84"><a href="#%E7%99%BC%E5%B8%83%E7%B4%80%E9%8C%84" class="direct-link">#</a> ç™¼å¸ƒç´€éŒ„</h3><p>å»ºæ§‹å¥½ SPF ç´€éŒ„å¾Œè«‹åœ¨ä½ çš„ DNS è£¡ä»¥ TXT é¡å‹ç™¼å¸ƒå‡ºå»ï¼Œç­‰å¾…å¹¾åˆ†é˜æ‡‰è©²å°±å¯ä»¥åœ¨ mxtoolbox ä¸ŠæŸ¥è©¢åˆ°äº†ã€‚ä½¿ç”¨é›²ç«¯ hosting provideræœå‹™è«‹ä¸€æ¨£åƒè€ƒå®˜æ–¹æ–‡ä»¶ï¼š<a href="https://support.google.com/a/answer/10684623?hl=en&ref_topic=10685331" rel="noopener noreferrer" target="_blank">Gsuite</a>ã€<a href="https://docs.microsoft.com/en-us/microsoft-365/security/office-365-security/set-up-spf-in-office-365-to-help-prevent-spoofing?view=o365-worldwide#create-or-update-your-spf-txt-record" rel="noopener noreferrer" target="_blank">Office365</a>ã€<a href="https://docs.aws.amazon.com/ses/latest/DeveloperGuide/send-email-authentication-spf.html" rel="noopener noreferrer" target="_blank">Amazon SES</a>ã€‚</p><hr><h2 id="dkim"><a href="#dkim" class="direct-link">#</a> DKIM</h2><p>DKIM ä¸åŒæ–¼ SPF åœ¨æ–¼ï¼Œä¸€ç­† SPF ç´€éŒ„å°±ä»£è¡¨äº†ä¸€å€‹å¯„ä¿¡ domainï¼Œå› æ­¤ä½ æœ‰å¹¾å€‹æœƒå¯„ä¿¡çš„ domain å°±è¦æœ‰å¹¾ç­† SPF ç´€éŒ„ï¼Œä½†æ˜¯ DKIM æ˜¯ä¸€å€‹ domain å¯ä»¥æœ‰å¾ˆå¤šç­†çš„ï¼Œåªè¦å„å€‹ mail server ä½¿ç”¨çš„ selector éƒ½ä¸åŒå°±å¥½ã€‚</p><h3 id="%E6%83%85%E5%A2%83%E4%B8%80%EF%BC%9A%E8%87%AA%E6%9E%B6%E7%9A%84-email-server"><a href="#%E6%83%85%E5%A2%83%E4%B8%80%EF%BC%9A%E8%87%AA%E6%9E%B6%E7%9A%84-email-server" class="direct-link">#</a> æƒ…å¢ƒä¸€ï¼šè‡ªæ¶çš„ emailÂ server</h3><p>å¯ä»¥ç”¨é€™å€‹ <a href="https://dmarcly.com/tools/dkim-record-generator" rel="noopener noreferrer" target="_blank">DKIM generator</a> ä¾†ç”¢ç”Ÿå…¬ç§é‘°ï¼Œè«‹æŠŠç§é‘°æ”¾å…¥ mail server è¨­å®šä¸­ä¿ç®¡å¥½ï¼Œç„¶å¾ŒæŠŠå…¬é‘°å¾ DNS ç™¼å¸ƒå‡ºå»ã€‚</p><h3 id="%E6%83%85%E5%A2%83%E4%BA%8C%EF%BC%9A%E9%9B%B2%E7%AB%AF-hosting-provider"><a href="#%E6%83%85%E5%A2%83%E4%BA%8C%EF%BC%9A%E9%9B%B2%E7%AB%AF-hosting-provider" class="direct-link">#</a> æƒ…å¢ƒäºŒï¼šé›²ç«¯ hostingÂ provider</h3><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯é›²ç«¯ hosting provider çš„æœå‹™ï¼Œä¾‹å¦‚ç”¨ Microsoft Office365 æˆ–æ˜¯ Gsuiteï¼Œé‚£éº¼ DKIM çš„è¨­å®šå·²ç¶“å…§å»ºäº†å¹¾ä¹ä¸ç”¨ä½ åšã€‚å¦‚æœä½ æƒ³ç”¨è‡ªå·±çš„key pair ä¹Ÿå¯ä»¥ï¼Œè·Ÿè‘—æ•™å­¸è¨­å®šï¼š<a href="https://support.google.com/a/answer/174126" rel="noopener noreferrer" target="_blank">Gsuite</a>ã€<a href="https://docs.microsoft.com/en-us/microsoft-365/security/office-365-security/use-dkim-to-validate-outbound-email?view=o365-worldwide" rel="noopener noreferrer" target="_blank">Office365</a>ã€<a href="https://docs.aws.amazon.com/ses/latest/DeveloperGuide/send-email-authentication-dkim-easy-setup-domain.html" rel="noopener noreferrer" target="_blank">Amazon SES</a> å°±å¯ä»¥äº†ï¼Œä»–é‚„æœƒå¹«ä½ ç™¼å¸ƒåˆ° DNSã€‚</p><h3 id="%E6%83%85%E5%A2%83%E4%B8%89%EF%BC%9A%E7%AC%AC%E4%B8%89%E6%96%B9%E6%9C%8D%E5%8B%99"><a href="#%E6%83%85%E5%A2%83%E4%B8%89%EF%BC%9A%E7%AC%AC%E4%B8%89%E6%96%B9%E6%9C%8D%E5%8B%99" class="direct-link">#</a> æƒ…å¢ƒä¸‰ï¼šç¬¬ä¸‰æ–¹æœå‹™</h3><p>å¦‚æœæ˜¯å…¶ä»–ç¬¬ä¸‰æ–¹æœå‹™ï¼ˆmarketing email ç­‰ç­‰ï¼‰ï¼Œåšæ³•å¾€å¾€æ˜¯è«‹ä½ ç™¼ä¸€ç­† CNAME ç´€éŒ„æŒ‡åˆ°ç”±ç¬¬ä¸‰æ–¹æœå‹™å¯¦éš›å‰µé€ ä¸¦ç™¼å¸ƒçš„å…¬é‘°ï¼Œé€™æ¨£å°±å¯ä»¥ç”±ç¬¬ä¸‰æ–¹æœå‹™çµ±ä¸€ç®¡ç†å…¬ç§é‘°ï¼Œä½ ä¹Ÿä¸ç”¨æ“”å¿ƒ DKIM æ²’ç™¼å¥½ã€‚</p><p>èˆ‰ä¾‹ä¾†èªªï¼Œå¦‚æœæ˜¯ç”¨ SendGridï¼Œå®Œæˆ â€œSettings/Sender Authentication/Authenticate Your Domainâ€ çš„æµç¨‹å¾Œæœƒä¾†åˆ°é€™ä¸€é ï¼š</p><p></p><figure><picture><source sizes="(max-width: 758px) 100vw, 758px" srcset="/img/posts/crystal/email-sec-examples/dmarcly-1920w.webp 1920w, /img/posts/crystal/email-sec-examples/dmarcly-1280w.webp 1280w, /img/posts/crystal/email-sec-examples/dmarcly-840w.webp 840w, /img/posts/crystal/email-sec-examples/dmarcly-320w.webp 320w" type="image/webp"><source sizes="(max-width: 758px) 100vw, 758px" srcset="/img/posts/crystal/email-sec-examples/dmarcly-1920w.png 1920w, /img/posts/crystal/email-sec-examples/dmarcly-1280w.png 1280w, /img/posts/crystal/email-sec-examples/dmarcly-840w.png 840w, /img/posts/crystal/email-sec-examples/dmarcly-320w.png 320w" type="image/png"><img src="/img/posts/crystal/email-sec-examples/dmarcly-1920w.png" height="548" width="800" decoding="async" loading="lazy" style="background-size:cover;background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 800 548'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAGCAIAAACepSOSAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAcUlEQVQImU3JMQ4CMQwEwPz/mxRIIO7OcbK7jh2EkCiYdtrzsNv9cZy28qv+NHNcfXQflGKteu/a+3fH5S9zAIooKE5bNiqzdrXKFEhqOeLoHJCPyorIllRSggpMZsTihCB2tmTEoBz0OR1umH1qgIYPSMWcR9ZclJAAAAAASUVORK5CYII='%3E%3C/image%3E%3C/svg%3E&#34;)"></picture><figcaption><p>from <a href="https://dmarcly.com/blog/how-to-set-up-spf-and-dkim-for-sendgrid" rel="noopener noreferrer" target="_blank">DMARCLY tutorial</a></p></figcaption></figure><p></p><p>ä½ å°±ç…§è‘—ç™¼åœ¨ DNS å°±å¥½ï¼Œå¦‚ä¸‹ï¼š</p><pre class="language-txt"><code class="language-txt">//æˆ‘å€‘ç™¼å¸ƒçš„<br>s1._domainkey.example.com CNAME s1.domainkey.uXXX.wlXXX.sendgrid.net<br><br>//sendgrid ç™¼å¸ƒçš„<br>s1.domainkey.uXXX.wlXXX.sendgrid.net TXT "v=DKIM1; k=rsa;...."</code></pre><hr><h2 id="dmarc"><a href="#dmarc" class="direct-link">#</a> DMARC</h2><p>ä»¥ä¸‹çš†å»ºè­°æ¡æœ€åš´æ ¼çš„è¨­ç½®ï¼Œè‹¥æ“”å¿ƒä½¿ç”¨ <code>p=reject</code> æœƒå¤ªéåš´è‹›é€ æˆå›°æ“¾è«‹è‡³å°‘ä½¿ç”¨ <code>p=quarantine</code>ã€‚</p><p>ä»¥ä¸‹ç¯„ä¾‹è«‹æŠŠ <code>rua</code> è·Ÿ <code>ruf</code> ä¸­çš„ <code>xx</code> æ›æˆè‡ªå·±çš„ä¿¡ç®±ã€‚å¯ä»¥åœ¨å¯„ä¿¡ç¶²åŸŸä¸­è¨­å®šä¸€å€‹å°ˆé–€æ¥æ”¶å ±å‘Šçš„ä¿¡ç®±ï¼ˆä¾‹å¦‚ OneDegree å°±å‰µç«‹äº†ä¸€å€‹ <code>dmarc.reporting@onedegree.hk</code>ï¼‰ï¼Œæˆ–æ˜¯å¦‚æœæœ‰ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„ DMARC reporting åŠŸèƒ½ï¼ˆä¾‹å¦‚ <a href="http://dmarcanalyzer.com" rel="noopener noreferrer" target="_blank">dmarcanalyzer.com</a>ï¼‰å°±æ›æˆä»–å€‘æä¾›çš„ä¿¡ç®±ã€‚</p><p>å¦‚æœæ±ºå®šæŠŠå ±å‘Šå¯„åˆ°å…¶ä»–ç¶²åŸŸçš„è©±ï¼Œå‹™å¿…æ³¨æ„æ”¶ä¿¡äººç¶²åŸŸæœ‰æ²’æœ‰æˆæ¬Šæ¥æ”¶å ±å‘Šã€‚æ ¹æ“š RFC è¦ç¯„ï¼Œæ”¶ä¿¡äººç¶²åŸŸéœ€è¦åœ¨ <code>&lt;dmarc domain>._report._dmarc.&lt;reporting domain></code> ç™¼ä¸€ç­† DMARC ç´€éŒ„ä¾†æˆæ¬Šå ±å‘Šå¯„é€ã€‚å‡è¨­ DMARC ç´€éŒ„ç¶²åŸŸï¼š<a href="http://sender.com" rel="noopener noreferrer" target="_blank">sender.com</a>ï¼Œæ”¶å ±å‘Šåœ°å€ç‚ºï¼šreport@thirdparty.comï¼Œå‰‡ <a href="http://thirdparty.com" rel="noopener noreferrer" target="_blank">thirdparty.com</a> è¦åœ¨ <code>sender.com._report._dmarc.thirdparty.com</code> ç™¼ä¸€ç­†å…§å®¹ç‚º <code>v=DMARC1</code> çš„ TXT ç´€éŒ„ã€‚é€™å€‹æ©Ÿåˆ¶çš„ç›®çš„ä¸€ä¾†æ˜¯ç‚ºäº†é˜²æ­¢æœ‰äººæ•…æ„ç”¨å¤§é‡å ±å‘Šå°ç¬¬ä¸‰æ–¹çš„æ”¶ä¿¡äººåšåƒåœ¾ä¿¡ä»¶æ”»æ“Šï¼ˆspammingï¼‰ï¼ŒäºŒä¾†ä¹Ÿæ˜¯ä¿è­·ç™¼è¡Œ DMARC ç´€éŒ„çš„ç¶²åŸŸä¸è¦è®“éå¤šè³‡è¨Šå¤–æµã€‚</p><p>è±†çŸ¥è­˜ï¼šå‰é¢æåˆ°çš„ <a href="http://dmarcanalyzer.com" rel="noopener noreferrer" target="_blank">dmarcanalyzer.com</a>ï¼Œå°±æ˜¯è¨­å®šæ¥æ”¶æ‰€æœ‰å ±å‘Šå“¦ï¼<code>*._report._dmarc.rep.dmarcanalyzer.com TXT "v=DMARC1;"</code></p><p>å¦å¤–ï¼Œå¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡è¨­å®šï¼Œå»ºè­° <code>p=reject</code> å…ˆæ”¹æˆ <code>p=none</code> é˜²æ­¢ä¿¡ä»¶çªç„¶éƒ½è¢«æ“‹æ‰ã€‚è«‹ç¢ºèªæ¯æ—¥çš„å½™æ•´å ±å‘Šçµæœç¬¦åˆé æœŸï¼Œä¸¦æ­é…æ‰‹å‹•æª¢æŸ¥åŸå§‹ä¿¡ä»¶çœ‹çœ‹ä¸åŒæ”¶ä¿¡ mail server æ•ˆæœå¦‚ä½•ï¼Œç­‰å¯¦é©—äº†ä¸€é™£å­éƒ½æ²’å•é¡Œï¼Œå†é€æ¼¸æ”¹æˆæ›´åš´æ ¼çš„ <code>p=quarantine</code> ï¼Œç©©å®šå¾Œä½¿ç”¨ <code>p=reject</code>ã€‚</p><h3 id="%E6%83%85%E5%A2%83%E4%B8%80%EF%BC%9A%E5%AF%A6%E9%A9%97%E4%B8%AD"><a href="#%E6%83%85%E5%A2%83%E4%B8%80%EF%BC%9A%E5%AF%A6%E9%A9%97%E4%B8%AD" class="direct-link">#</a> æƒ…å¢ƒä¸€ï¼šå¯¦é©—ä¸­</h3><p>å¦‚æœä½ é‚„åœ¨å¯¦é©—éšæ®µï¼Œä¸å¸Œæœ›æ‰€æœ‰çš„ä¿¡éƒ½è¢«æ“‹ä¸‹ï¼Œå¯ä»¥ç”¨å¯¬é¬†ä¸€é»çš„ policy æˆ–æ˜¯ä½ä¸€é»çš„ percentage è®“éƒ¨åˆ†ä¿¡ä»¶é€šéé©—è­‰ï¼š</p><pre class="language-txt"><code class="language-txt">// lax policy  <br>v=DMARC1 p=none rua=mailto:xx ruf=mailto:xx<br><br>// lower percentage of policy application  <br>v=DMARC1 p=quarantine pct=20 rua=mailto:xx ruf=mailto:xx</code></pre><h3 id="%E6%83%85%E5%A2%83%E4%BA%8C%EF%BC%9A%E6%B2%92%E6%9C%89%E5%AD%90%E7%B6%B2%E5%9F%9F"><a href="#%E6%83%85%E5%A2%83%E4%BA%8C%EF%BC%9A%E6%B2%92%E6%9C%89%E5%AD%90%E7%B6%B2%E5%9F%9F" class="direct-link">#</a> æƒ…å¢ƒäºŒï¼šæ²’æœ‰å­ç¶²åŸŸ</h3><p>å¦‚æœå¯„ä¿¡ç¶²åŸŸåªæœ‰ä¸€å€‹ï¼Œæˆ–æ˜¯æ²’æœ‰å¤šå€‹å­ç¶²åŸŸå…±ç”¨ DMARC ç´€éŒ„ï¼š</p><pre class="language-txt"><code class="language-txt">v=DMARC1 p=reject aspf=s adkim=s rua=mailto:xx ruf=mailto:xx</code></pre><h3 id="%E6%83%85%E5%A2%83%E4%B8%89%EF%BC%9A%E5%AD%90%E7%B6%B2%E5%9F%9F%E5%85%B1%E7%94%A8-dmarc"><a href="#%E6%83%85%E5%A2%83%E4%B8%89%EF%BC%9A%E5%AD%90%E7%B6%B2%E5%9F%9F%E5%85%B1%E7%94%A8-dmarc" class="direct-link">#</a> æƒ…å¢ƒä¸‰ï¼šå­ç¶²åŸŸå…±ç”¨ DMARC</h3><p>å¦‚æœ DMARC ç´€éŒ„æ¶µè“‹å¤šå€‹å­ç¶²åŸŸï¼š</p><pre class="language-txt"><code class="language-txt">v=DMARC1 p=reject rua=mailto:xx ruf=mailto:xx</code></pre><p>å¦‚æœä½ æƒ³ç‚ºå­ç¶²åŸŸè¨­å®šå¯¬é¬†ä¸€é»çš„ policyï¼Œä¹Ÿå¯ä»¥ç”¨ <code>sp</code></p><pre class="language-txt"><code class="language-txt">v=DMARC1 p=reject sp=quarantine rua=mailto:xx ruf=mailto:xx</code></pre><h3 id="%E7%99%BC%E5%B8%83%E7%B4%80%E9%8C%84-2"><a href="#%E7%99%BC%E5%B8%83%E7%B4%80%E9%8C%84-2" class="direct-link">#</a> ç™¼å¸ƒç´€éŒ„</h3><p>è«‹åœ¨ä½ çš„ DNS è£¡ä»¥ TXT é¡å‹ç™¼å¸ƒåˆ° <code>_dmarc.&lt;yourdomain></code> é€™å€‹ç¶²åŸŸï¼Œæ‡‰è©²ä¸€æ¨£å¹¾åˆ†é˜å°±å¯ä»¥åœ¨ mxtoolbox ä¸ŠæŸ¥è©¢åˆ°äº†ã€‚å¦‚æœæœ‰æŠŠå ±å‘Šå¯„åˆ°å…¶ä»–ç¶²åŸŸï¼Œä¹Ÿè«‹ç¢ºå®šæœ‰ç™¼å¸ƒæˆæ¬Šç´€éŒ„ã€‚</p><h3 id="%E4%B8%8D%E5%AF%84%E4%BF%A1%E7%9A%84%E7%B6%B2%E5%9F%9F"><a href="#%E4%B8%8D%E5%AF%84%E4%BF%A1%E7%9A%84%E7%B6%B2%E5%9F%9F" class="direct-link">#</a> ä¸å¯„ä¿¡çš„ç¶²åŸŸ</h3><p>ä¸Šé¢è¬›äº†æœƒå¯„ä¿¡çš„ç¶²åŸŸè©²å¦‚ä½•è¨­ç½®ï¼Œé‚£ä¸å¯„ä¿¡çš„ç¶²åŸŸæ€éº¼è¾¦å‘¢ï¼Ÿç•¢ç«Ÿä»€éº¼éƒ½æ²’è¨­ç½®çš„è©±ï¼Œé§­å®¢ç”¨é€™äº›å­ç¶²åŸŸå¯„ä¿¡å°±èƒ½èº²éé©—è­‰å•Šï¼</p><p>å¾ˆç°¡å–®ï¼Œæ˜æ–‡ç¦æ­¢æ‰€æœ‰ä¿¡ä»¶å°±å¥½ã€‚å¦‚æœæœ‰å¾ˆå¤šå€‹ä¸å¯„ä¿¡çš„ç¶²åŸŸçš„è©±ï¼Œä¹Ÿå¯ä»¥ç”¨ CNAME çš„æ–¹å¼æŒ‡åˆ°ä¸€ç­†ç´€éŒ„ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚</p><pre class="language-txt"><code class="language-txt"># SPF<br>record: v=spf1 -all  <br>DNS: parked.mydom.com TXT "v=spf1 -all"<br><br># DKIM<br>record: v=DKIM1; p=  <br>DNS: \*.\_domainkey.parked.mydom.com TXT "v=DKIM1; p="<br><br># DMARC<br>record: v=DMARC1; p=reject; rua=mailto:xx; ruf=mailto:xx  <br>## DNS for one parked domain:  <br>_dmarc.parked.mydom.com TXT "v=DMARC1; p=reject; rua=mailto:xx; ruf=mailto:xx"<br><br>## DNS for many parked domains:   <br>_dmarc.parked1.mydom.com CNAME _dmarc.parkeddoms.mydom.com  <br>_dmarc.parked2.mydom.com CNAME _dmarc.parkeddoms.mydom.com  <br>_dmarc.parked3.mydom.com CNAME _dmarc.parkeddoms.mydom.com  <br>_dmarc.parkeddoms.mydom.com TXT "v=DMARC1; p=reject; rua=mailto:xx; ruf=mailto:xx"</code></pre><hr><h3 id="resources"><a href="#resources" class="direct-link">#</a> Resources</h3><ul><li><a href="https://dmarcly.com/blog/how-to-set-up-dmarc-dkim-and-spf-in-office-365-o365-the-complete-implementation-guide" rel="noopener noreferrer" target="_blank">DMARCLY: Setting up SPF, DKIM, DMARC for Office365</a></li><li><a href="https://dmarcly.com/blog/how-to-set-up-spf-and-dkim-for-amazon-ses" rel="noopener noreferrer" target="_blank">DMARCLY: Setting up SPF, DKIM for Amazon SES</a></li><li><a href="https://dmarcly.com/blog/spf-dkim-dmarc-set-up-guide-for-g-suite-gmail-for-business" rel="noopener noreferrer" target="_blank">DMARCLY: Setting up SPF, DKIM, DMARC for Gsuite</a></li></ul><p><strong>SPF domains for common third party services:</strong></p><table><thead><tr><th>Service</th><th>SPF</th><th>Lookups</th></tr></thead><tbody><tr><td>Google</td><td><code>_spf.google.com</code></td><td>4</td></tr><tr><td>Microsoft (Office 365)</td><td><code>spf.protection.outlook.com</code></td><td>2</td></tr><tr><td>Amazon SES</td><td><code>amazonses.com</code></td><td>1</td></tr><tr><td>MailChimp</td><td><code>servers.mcsv.net</code></td><td>1</td></tr><tr><td>SendGrid</td><td><code>sendgrid.net</code></td><td>2</td></tr><tr><td>FreshDesk</td><td><code>email.freshdesk.com</code></td><td>7 (includes sendgrid)</td></tr><tr><td>Mandrill</td><td><code>spf.mandrillapp.com</code></td><td>1</td></tr><tr><td>Mailgun</td><td><code>mailgun.org</code></td><td>3</td></tr><tr><td>Mimecast</td><td><code>_netblocks.mimecast.com</code></td><td>6</td></tr><tr><td>Postmark</td><td><code>spf.mtasv.net</code></td><td>1</td></tr><tr><td>HelpScout</td><td><code>helpscoutemail.com</code></td><td>1</td></tr><tr><td>Qualtrics</td><td><code>_spf.qualtrics.com</code></td><td>1</td></tr><tr><td>SparkPost</td><td><code>sparkpostmail.com</code></td><td>2</td></tr><tr><td>Zoho</td><td><code>zoho.com</code></td><td>1</td></tr><tr><td>Salesforce</td><td><code>_spf.salesforce.com</code></td><td>2</td></tr><tr><td>Zendesk</td><td><code>mail.zendesk.com</code></td><td>1</td></tr><tr><td>ConstantContact</td><td><code>spf.constantcontact.com</code></td><td>1</td></tr><tr><td>Sendinblue</td><td><code>sendinblue.com</code></td><td>9 (includes google and zendesk)</td></tr><tr><td>MailerLite</td><td><code>_spf.mlsend.com</code></td><td>1</td></tr><tr><td>Keap</td><td><code>infusionmail.com</code></td><td>2</td></tr><tr><td>Sendpulse</td><td><code>mxsmtp.sendpulse.com</code></td><td>1</td></tr></tbody></table><div class="article-footer"><a href="https://tech-blog.cymetrics.io/posts/crystal/email-sec-examples/" on-click="share"><img src="/img/icons/icon_external link hyperlink.svg" alt="Share" height="24" width="24">Share this post</a></div><div><p style="font-weight: bold;">Tag</p><div class="post-tags"><a href="/tags/security/" class="post-tag">#Security</a> <a href="/tags/email-security/" class="post-tag">#Email Security</a></div><p style="font-weight: bold;">Recommendation</p><ol><li><a href="/posts/huli/clickjacking-intro/">ä¸è­˜å»¬å±±çœŸé¢ç›®ï¼šClickjacking é»æ“ŠåŠ«æŒæ”»æ“Š</a></li><li><a href="/posts/crystal/reverse-02/">Reverse Engineering 101 â€” Part 2</a></li><li><a href="/posts/nick/website-go-live-attack/">ç‚ºä»€éº¼ç¶²ç«™æ‰å‰›ä¸Šç·šå°±è¢«æ”»æ“Šï¼Ÿ</a></li><li><a href="/posts/jo/zerobased-path-traversal/">é›¶åŸºç¤è³‡å®‰ç³»åˆ—ï¼ˆäº”ï¼‰-è·¯å¾‘éæ­·ï¼ˆPath Traversalï¼‰</a></li><li><a href="/posts/huli/prevent-xss-might-be-harder-than-you-thought/">é˜²æ­¢ XSS å¯èƒ½æ¯”æƒ³åƒä¸­å›°é›£</a></li></ol></div><div class="article-author"><img src="/img/authors/crystal_logo.png" alt="crystal" class="article-author__img" data-deopt="true"><div class="article-author__info"><div class="article-author__title">Author</div><div class="article-author__author"><a href="/posts/crystal">crystal</a></div><div class="article-author__intro">Security newbie with a gallon of passion</div></div></div><p style="font-weight: bold;">Discussion(login required)</p><script async="" src="https://utteranc.es/client.js" crossorigin="anonymous" id="utterance-script" issue-term="title" label="utterance" repo="cymetrics/blog" theme="github-light"></script><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"é—œæ–¼ email security çš„å¤§å°äº‹â€Šâ€”â€Šç¯„ä¾‹ç¯‡","image":["https://tech-blog.cymetrics.io/img/posts/crystal/email-sec-examples/mailchimp-1920w.png","https://tech-blog.cymetrics.io/img/posts/crystal/email-sec-examples/mxtoolbox-1920w.png","https://tech-blog.cymetrics.io/img/posts/crystal/email-sec-examples/dmarcly-1920w.png","https://tech-blog.cymetrics.io/img/icons/icon_external link hyperlink.svg","https://tech-blog.cymetrics.io/img/authors/crystal_logo.png"],"author":{"@type":"Person","name":"crystal"},"publisher":{"@type":"Organization","name":"Cymetrics Tech Blog","url":"https://tech-blog.cymetrics.io","logo":{"@type":"ImageObject","url":"https://tech-blog.cymetrics.io/img/favicon/favicon-512x512.png","width":512,"height":512}},"url":"https://tech-blog.cymetrics.io/posts/crystal/email-sec-examples/","mainEntityOfPage":"https://tech-blog.cymetrics.io/posts/crystal/email-sec-examples/","datePublished":"2021-07-16","dateModified":"2023-10-02","description":"æœ‰é‘’æ–¼å¤§å®¶äº†è§£äº† SPFã€DKIMã€DMARC è¨­ç½®ä¸Šçš„åŸç†èˆ‡åœ°é›·å¾Œï¼Œå°æ–¼å¦‚ä½•è¨­ç½®å¯èƒ½é‚„æ˜¯éœ§é¢¯é¢¯ï¼Œå› æ­¤æ±ºå®šå†æ¨å‡ºç¯„ä¾‹ç¯‡è®“å¤§å®¶çœ‹ä¸€äº›å¯¦éš›çš„ç´€éŒ„ä»¥åŠè¨­ç½®æ–¹å¼ã€‚å¸Œæœ›å¯ä»¥è®“å¤§å®¶è¼•é¬†åšå¥½ email securityï¼ ä»¥ä¸‹æœ‰ä¸æ‡‚çš„æ¨™ç±¤å¯ä»¥åƒç…§è¨­å®šç¯‡ï¼š SPF çš„è¨­å®š ğŸ‘‰ é—œæ–¼..."}</script></article></main><footer><div class="footer-logos"><a href="https://www.facebook.com/cymetrics" rel="noopener noreferrer" target="_blank"><img src="/img/icons/icon_social media_facebook.svg" alt="facebook" height="30" width="30"></a><a href="https://www.linkedin.com/company/cymetrics" rel="noopener noreferrer" target="_blank"><img src="/img/icons/icon_social media_linkedln.svg" alt="linkedin" height="30" width="30"></a><a href="https://tech-blog.cymetrics.io/feed/feed.xml" rel="noreferrer noopener" target="_blank"><img src="/img/icons/rss-feed.svg" alt="rss feed" height="30" width="30"></a></div><div class="copyright">Â© 2021 Cymetrics Tech Blog, based on <a href="https://github.com/google/eleventy-high-performance-blog" rel="noopener noreferrer" target="_blank">eleventy-high-performance-blog</a>. <a href="https://oneinfinity.global/" rel="noopener noreferrer" target="_blank">OneInfinity</a></div></footer><script>// light/dark theme switch
      // disable dark mode for now
      const menuBtn = document.querySelector('.menu__btn')
      menuBtn.addEventListener('click', function() {
        document.querySelector('body').classList.toggle('lock')
        menuBtn.classList.toggle('menu__btn--close');
        document.querySelector('.nav__links').classList.toggle('nav__links--open')
      })</script></body></html>